<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>D3</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
<div class="canvas"></div>
<script>
  // 코드의 복잡도를 올리지 않기 위해 아래와 같이 자동생성을 안한 것입니다.
  /*
  let sampleData = []
  for (var i = 0; i < 1000; i++) {
          sampleData.push({
              'cx': Math.random() * 100,
              'cy': Math.random() * 100,
              'r': Math.random() * 100,
              //hsl은 색조(hue, 0 ~ 359), 포화(saturation), 밝기(lightness)
              'color': `hsl(${Math.random()* 360}, 100%, 50%)`
          })
  }
  */
  const sampleData = [
    // 반지름, x좌표, y좌표, 색상
    // svg, csv, json 형식으로도 사용가능
    [5, 20, 30, '#ff0000'],
    [5, 320, 90, '#ff0000'],
    [5, 150, 50, '#ff0000'],
    [7, 120, 70, '#ff0000'],
    [7, 530, 110, '#ff0000'],
    [7, 410, 20, '#ff0000'],
    [12, 720, 60, '#ff0000'],
    [12, 30, 110, '#ff0000'],
    [12, 90, 130, '#ff0000'],
    [19, 510, 180, '#ff0000'],
    [19, 310, 120, '#ff0000'],
    [8, 50, 150, '#ff0000'],
    [7, 50, 350, '#ff0000'],
  ];
  const svg = d3.select('.canvas').append('svg').attr('width', 1000).attr('height', 1000);
  // svg 선택해서 영역 크기 지정


  svg.selectAll('circle')
    .data(sampleData)
    .enter() // enter(데이터 수 > dom요소), update(재적용, 화면 갱신), exit(데이터 수 < dom요소 - 여기서는 circle 태그가 10개&데이터가 10개 미만인 경우 )
    .append('circle')
    .attr('r', d => d[0]) // 반지름 - 샘플 데이터의 0번째 데이터를 반환해주는 콜백함수 function(d) { return d[0]} 처럼 사용해도 됨
    .attr('cx', d => d[1] + 10) // 1번째값 + 10px하면 겹치지 않기 위해 옆으로 밀어주는 작업을 수행
    .attr('cy', d => d[2] + 10)
    .attr('fill', d => d[3])  // 색상 - 샘플 데이터의 3번째 데이터를 반환해주는 콜백함수 function(d) { return d[3]} 처럼 사용해도 됨

  /* 아래의 경우처럼 사용해도 됨 */
  // .attr("r", function (d) {
  //     return d[0];
  // })
  // .attr("cx", function (d) {
  //     return d[1] + 10;
  // })
  // .attr("cy", function (d) {
  //     return d[2] + 10;
  // })
  // .attr("fill", function (d) {
  //     return d[3];
  // })
</script>
</body>
</html>