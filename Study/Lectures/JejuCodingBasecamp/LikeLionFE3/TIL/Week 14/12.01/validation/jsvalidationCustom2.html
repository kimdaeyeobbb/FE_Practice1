<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>email validation2</title>
  </head>
  <body>
    <form action="">
      <label for="txt">입력 : </label>
      <input type="email" id="txt" required />

      <label for="txt2">입력 : </label>
      <input type="url" id="txt2" required />
      <button>제출</button>
    </form>

    <script>
      /* input을 모두 잡기위해서 querySelectorAll을 이용 */
      const inps = document.querySelectorAll("input");
      const btn = document.querySelector("button");
      //   inp.setCustomValidity("알맞은 형식의 이메일 주소를 입력하세요");
      //   inp.addEventListener("input", () => {
      //     if (inp.validity.typeMismatch) {
      //       // validity중 내가 원하는 속성의 이름 -> type miss match -> 이를 이용하면 어떤점이 부족한지 구체적으로 알 수 있음
      //       inp.setCustomValidity("알맞은 양식의 이메일 주소를 입력하세요"); //
      //     } else {
      //       inp.setCustomValidity(""); // 알맞은 양식이 들어왔으므로 에러메시지 해제
      //     }
      //   });

      /* 버튼 클릭시 발생하는 이벤트 */
      //   btn.addEventListener("click", (event) => {
      //     event.preventDefault();
      //     inps.forEach((item) => {
      //       item.addEventListener("input", validate);
      //     });
      //   });

      //   function validate(target) {
      //     console.log(target);
      //     if (target.validity.valueMissing) {
      //       target.setCustomValidity("아무것도 입력되지 않았다고요우!");
      //     } else if (target.validity.typeMismatch) {
      //       target.setCustomValidity("입력 값의 타입이 틀려먹었습니다");
      //     } else {
      //       target.setCustomValidity("");
      //     }
      //   }

      btn.addEventListener("click", (event) => {
        inps.forEach((item) => {
          validate(item);
        });
      });

      function validate(target) {
        if (target.validity.valueMissing) {
          target.setCustomValidity("아무것도 입력되지 않았다구요우!");
        } else if (target.validity.typeMismatch) {
          target.setCustomValidity("입력 값의 타입이 틀려먹었습니다.");
        } else {
          target.setCustomValidity("");
        }
      }
    </script>
  </body>
</html>
