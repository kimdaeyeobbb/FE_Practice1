# Git branch 

## branch란?

- 브랜치는 커밋을 가리키는 포인터임
- 특정 시점에서 프로젝트 변경이력을 기록하는 스냅샷이라고 볼 수 있음
(스냅샷: 특정 시점에 프로젝트 파일의 상태를 마치 사진 찍듯이 저장해서 기록하는 기술)

### main? master?

- 규모가 큰 프로젝트의 소스 코드를 관리할 때 기준이 되는 기본 저장소를 `main` 또는 `master`라고 부름
(최근 `master`라는 단어가 노예제를 연상시킨다는 이유로 기본 저장소를 `main`으로 부르는 것을 권장함)

### branch의 기능

- 작업 중인 프로젝트의 독립적인 버전을 따로 만들 수 있는 기능을 제공함
- (코드 수정, 새 기능 추가, 디버깅을 위한 테스트 작업 등의) 다양한 작업을 새로 생성한 브랜치에서 진행하면 메인 소스 코드를 안전하게 보호할 수 있음

- 즉, 브랜치를 활용해서 적용할 준비가 완벽하게 되기 전까지 소스 코드에 영향을 주지 않으면서 다양한 작업을 진행할 수 있음

- 브랜치를 이용한 작업을 하면 코드베이스를 깔끔하고 일목요연하게 유지할 수 있음


<br>

## Git 로컬 및 원격 브렌치 삭제

### 브랜치를 왜 삭제하는가?

- 프로젝트상 코드의 변경 사항을 저장하기 위해 브랜치를 만들었을 경우, 해당 브랜치의 변경 사항이나 새 기능을 프로젝트의 본 버전에 반영을 한 다음에는 해당브랜치를 유지할 필요가 없어진다.
- 따라서 프로젝트 저장소가 복잡해지지 않도록 작업이 완료된 브랜치는 삭제하는 것이 좋다.


### 로컬 브랜치 삭제

- 로컬 브랜치
  - 작업자 본인의 컴퓨터에 있는 브랜치
  - 원격 브랜치에 영향을 끼치지 않음

- 로컬 브랜치 삭제 명령어
```bash
git branch -d <로컬 브랜치 이름>
```
  - 세부사항 뜯어보기
    - `git branch`: 로컬 브랜치 삭제 명령어
    - `-d`: `--delete`의 약어. 무엇인가를 삭제하고 싶다는 의미를 담고 있는 플래그<br>(flag: a way to set options and pass in arguments to the commands you run)
    - `<로컬 브랜치 이름>`: 삭제하고 싶은 로컬 브랜치명

- 유의사항
  - 현재 작업중인 브랜치는 삭제할 수 없음
  - 로컬 브랜치를 삭제하기 전에 `git checkout`명령어를 사용해서 삭제 대상이 아닌 다른 브랜치로 전환해야 함
  
  
#### 로컬 브랜치를 삭제할 수 없는 경우

- 브랜치에 병합되지 않은 변경 사항 및 푸시되지 않은 커밋이 있는 경우 `-d` 플래그를 사용해서 로컬 브랜치를 삭제할 수 없음<br>
(브랜치가 가지고 있는 커밋이 다른 브랜치 혹은 저장소에 기록되어 있지 않을 경우, 커밋 기록이 실수로 손실되는 것을 Git이 방지하기 때문)
- 따라서 이러한 상황에서 `git branch -d` 명령어를 실행하면 에러가 발생함 <br>
(에러 메시지: `error: The branch '브랜치명' is not fully merged`)

- 이런 경우 해당 브랜치를 삭제하려면 `-D` 플래그를 사용해야 함

```bash
git branch -D <로컬 브랜치 이름>
```

- `-D`: `--delete --force` (강제 삭제)의 줄임말이며, 병합 여부와 관계없이 로컬 브랜치를 강제로 삭제함
  - 본 명령어는 브랜치 삭제 여부를 재확인하는 절차가 따로 없으므로 주의해서 사용해야 함<br>(로컬 브랜치를 확실히 삭제하려는 경우에만 사용할 것을 권장)
  - 다른 브랜치로 변경 이력을 병합하거나 코드 베이스의 원격 브랜치로 푸시하지 않은 상태에서 로컬 브랜치를 삭제하면 변경 사항이 손실될 위험이 있음


<br>

## 원격 브랜치 삭제

- 원격 브랜치는 로컬 브랜치와는 독립적인 별개의 개체임
- 작업자의 컴퓨터에 저장되어 있는 로컬 브랜치와 달리, 원격 브랜치는 원격 서버에 저장되어 있으므로 원격 서버를 통해 접근할 수 있음 

- 원격 브랜치 삭제 명령어
```bash
git push <원격 저장소 이름> -d <원격 브랜치 이름>
```

  - 세부사항 뜯어보기
    - `git push`: 로컬 브랜치를 삭제하는 `git branch` 명령어 대신 `git push` 명령어를 사용해서 원격 브랜치를 삭제
    - `origin`: `git push` 명령어 다음에 원격 저장소 이름을 전달함. 대부분은 `origin` 사용
    - `-d`: `--delete`의 줄임말 (삭제)
    - `<원격 브랜치 이름>`: 삭제하고 싶은 원격 브랜치 이름

  
### 원격 브랜치 삭제 예시

1. 원격 브랜치 목록 확인

```bash
git branch -a
```

- `-a`: -a 플래그. `--all`의 줄임말. 이를 사용하면 로컬, 원격 브랜치를 모두 확인할 수 있음

- 예시
```bash
$ git branch - a

* main
testbranch7
remotes/origin/main
remotes/origin/testbranch7
```

- 로컬 브랜치: `main`, `testbranch7`
- 원격 브랜치: `origin/main`, `origin/testbranch7`


2. 원격 저장소 목록 확인

```bash
git branch -r
```

- `-r`: -r 플래그. `--remotes`의 줄임말.

- 예시
```bash
$ git branch -r

origin/main
origin/testbranch7
```

3. 원격 저장소에 있는 브랜치 삭제하기

- `origin` 저장소에 있는 `testbranch7` 브랜치를 삭제하는 예시

```bash
git push origin -d testbranch7
```


4. 브랜치가 삭제되었는지 확인하기

```bash
$ git branch -r

origin/main
```

- `git branch -r`: 해당 명령어를 사용해서 원격 브랜치 목록을 살펴보면 `origin/testbranch7`이라는 원격 저장소가 브랜치 목록에서 더이상 보이지 않음을 확인할 수 있음



<br>


## 브랜치 활용

### 브랜치 목록 확인

- 브랜치 목록 확인 명령어

```bash
git branch
```

### 브랜치 전환

- 브랜치 전환 명령어

```bash
git checkout <브랜치 이름>
```

- 세부사항 뜯어보기
  - `<브랜치 이름>`: 전환하고 싶은 브랜치
  - `git checkout section` : `section` 브랜치로 전환하는 명령어

<br>


